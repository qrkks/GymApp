# å‘½åé‡æ„è®¡åˆ’

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è§„åˆ’é¡¹ç›®å‘½åé‡æ„è®¡åˆ’ï¼ŒåŸºäºåŠ›é‡ä¸¾æœ¯è¯­è§„èŒƒï¼Œç»Ÿä¸€ä»£ç å±‚é¢çš„å‘½åï¼ŒåŒæ—¶ä¿æŒæ•°æ®åº“è¡¨åä¸å˜ä»¥ç¡®ä¿æ•°æ®å¯¼å…¥å…¼å®¹æ€§ã€‚

**åŸåˆ™ï¼š**
- âœ… ä¸šåŠ¡å±‚é¢å‘½åï¼šè¾¹é‡æ„è¾¹æ”¹ï¼Œé€æ­¥ç»Ÿä¸€
- âŒ æ•°æ®åº“è¡¨åï¼šä¿æŒä¸å˜ï¼Œç¡®ä¿ Python åç«¯æ•°æ®å¯¼å…¥æ­£å¸¸

---

## ğŸ¯ ç›®æ ‡å‘½åè§„èŒƒ

### åŸºäºåŠ›é‡ä¸¾æœ¯è¯­çš„å‘½å

| å½“å‰å‘½å | ç›®æ ‡å‘½å | è¯´æ˜ | ä¼˜å…ˆçº§ |
|---------|---------|------|--------|
| `bodypart` | `body-part` | èº«ä½“éƒ¨ä½ï¼ˆkebab-caseï¼‰ | é«˜ |
| `workoutset` | `exercise-block` | è®­ç»ƒè®°å½•ä¸­çš„åŠ¨ä½œå—ï¼ˆåŒ…å«è¯¥åŠ¨ä½œçš„æ‰€æœ‰ç»„ï¼‰ | é«˜ |
| `/api/sets` | `/api/set` | æ”¹ä¸ºå•æ•°ï¼Œç¬¦åˆè§„èŒƒ | ä¸­ |
| `workout` | `workout` | âœ… ä¿æŒï¼Œæ ‡å‡†æœ¯è¯­ | - |
| `exercise` | `exercise` | âœ… ä¿æŒï¼Œæ ‡å‡†æœ¯è¯­ | - |
| `set` | `set` | âœ… ä¿æŒï¼Œæ ‡å‡†æœ¯è¯­ | - |

---

## ğŸ“¦ é‡æ„èŒƒå›´

### âœ… éœ€è¦æ”¹çš„å†…å®¹ï¼ˆä¸šåŠ¡å±‚é¢ï¼‰

#### 1. åŸŸåç›®å½•

```
domain/
â”œâ”€â”€ bodypart/          â†’ body-part/
â”‚   â”œâ”€â”€ application/
â”‚   â””â”€â”€ repository/
â””â”€â”€ workoutset/        â†’ exercise-block/ (é‡æ„æ—¶)
    â”œâ”€â”€ application/
    â””â”€â”€ repository/
```

**å½±å“æ–‡ä»¶ï¼š**
- ç›®å½•ç»“æ„
- æ‰€æœ‰å¯¼å…¥è·¯å¾„ï¼ˆ`@domain/bodypart/...` â†’ `@domain/body-part/...`ï¼‰

#### 2. API è·¯ç”±

```
app/api/
â”œâ”€â”€ bodypart/          â†’ body-part/
â”‚   â”œâ”€â”€ route.ts
â”‚   â””â”€â”€ [id]/route.ts
â”œâ”€â”€ workoutset/        â†’ exercise-block/ (é‡æ„æ—¶)
â”‚   â”œâ”€â”€ route.ts
â”‚   â””â”€â”€ [date]/[exercise]/route.ts
â””â”€â”€ sets/              â†’ set/ (æ”¹ä¸ºå•æ•°)
    â””â”€â”€ route.ts
```

**å½±å“æ–‡ä»¶ï¼š**
- API è·¯ç”±æ–‡ä»¶è·¯å¾„
- å‰ç«¯ API è°ƒç”¨ï¼ˆ`/api/bodypart` â†’ `/api/body-part`ï¼‰

#### 3. Repository å±‚

**æ–‡ä»¶å‘½åï¼š**
- `bodypart.repository.ts` â†’ `body-part.repository.ts`
- `workoutset.repository.ts` â†’ `exercise-block.repository.ts` (é‡æ„æ—¶)

**å‡½æ•°å‘½åï¼š**
- å¯ä»¥ä¼˜åŒ–ï¼Œä½†ä¿æŒè¯­ä¹‰æ¸…æ™°

#### 4. Application Service å±‚

**æ–‡ä»¶å‘½åï¼š**
- `bodypart.use-case.ts` â†’ `body-part.use-case.ts`
- `workoutset.use-case.ts` â†’ `exercise-block.use-case.ts` (é‡æ„æ—¶)

#### 5. å‰ç«¯ç»„ä»¶å’Œå¼•ç”¨

**éœ€è¦æ›´æ–°çš„åœ°æ–¹ï¼š**
- ç»„ä»¶ä¸­çš„ API è°ƒç”¨
- å˜é‡åå’Œå‡½æ•°å
- å¯¼å…¥è·¯å¾„

---

### âŒ ä¸éœ€è¦æ”¹çš„å†…å®¹ï¼ˆæ•°æ®åº“å±‚é¢ï¼‰

#### 1. æ•°æ®åº“è¡¨å

**ä¿æŒä¸å˜ï¼š**
- `body_parts` â†’ ä¿æŒ `body_parts`
- `workout_sets` â†’ ä¿æŒ `workout_sets`
- `sets` â†’ ä¿æŒ `sets`
- `workouts` â†’ ä¿æŒ `workouts`
- `exercises` â†’ ä¿æŒ `exercises`

**åŸå› ï¼š**
- ç¡®ä¿ Python åç«¯æ•°æ®å¯¼å…¥æ­£å¸¸
- é¿å…æ•°æ®è¿ç§»å¤æ‚æ€§

#### 2. Schema è¡¨åå­—ç¬¦ä¸²

```typescript
// ä¿æŒä¸å˜
export const bodyParts = sqliteTable('body_parts', { ... });
//                                    â†‘ è¡¨åå­—ç¬¦ä¸²ä¸å˜

export const workoutSets = sqliteTable('workout_sets', { ... });
//                                      â†‘ è¡¨åå­—ç¬¦ä¸²ä¸å˜
```

#### 3. è„šæœ¬æ–‡ä»¶ä¸­çš„ SQL

**ä¿æŒä¸å˜çš„æ–‡ä»¶ï¼š**
- `scripts/reset-db.ts` - SQL è¡¨åå­—ç¬¦ä¸²
- `scripts/init-db.ts` - SQL è¡¨åå­—ç¬¦ä¸²
- `scripts/init-db.sql` - SQL è¡¨åå­—ç¬¦ä¸²
- `tests/setup/test-db.ts` - SQL è¡¨åå­—ç¬¦ä¸²

---

## ğŸš€ å®æ–½æ­¥éª¤

### é˜¶æ®µ 1ï¼šé‡æ„ bodypart åŸŸï¼ˆå½“å‰ï¼‰

#### 1.1 é‡å‘½ååŸŸåç›®å½•

```bash
# é‡å‘½åç›®å½•
domain/bodypart/ â†’ domain/body-part/
```

#### 1.2 æ›´æ–°å¯¼å…¥è·¯å¾„

**éœ€è¦æ›´æ–°çš„æ–‡ä»¶ï¼š**
- `domain/body-part/application/bodypart.use-case.ts`
- `domain/body-part/repository/queries/bodypart.repository.ts`
- `domain/body-part/repository/commands/bodypart.repository.ts`
- `app/api/body-part/route.ts`
- æ‰€æœ‰å¼•ç”¨ `@domain/bodypart` çš„æ–‡ä»¶

**æ›´æ–°å†…å®¹ï¼š**
```typescript
// æ—§
import * as bodypartUseCase from '@domain/bodypart/application/bodypart.use-case';

// æ–°
import * as bodypartUseCase from '@domain/body-part/application/body-part.use-case';
```

#### 1.3 é‡å‘½å API è·¯ç”±

```bash
# é‡å‘½åç›®å½•
app/api/bodypart/ â†’ app/api/body-part/
```

#### 1.4 æ›´æ–°å‰ç«¯ API è°ƒç”¨

**éœ€è¦æ›´æ–°çš„æ–‡ä»¶ï¼š**
- æ‰€æœ‰è°ƒç”¨ `/api/bodypart` çš„å‰ç«¯ä»£ç 

**æ›´æ–°å†…å®¹ï¼š**
```typescript
// æ—§
fetch('/api/bodypart')

// æ–°
fetch('/api/body-part')
```

#### 1.5 æ›´æ–°æµ‹è¯•æ–‡ä»¶

- æ›´æ–°æµ‹è¯•æ–‡ä»¶ä¸­çš„å¯¼å…¥è·¯å¾„
- æ›´æ–°æµ‹è¯•æ–‡ä»¶ä¸­çš„ API è°ƒç”¨

### é˜¶æ®µ 2ï¼šé‡æ„æ–°åŸŸæ—¶ä½¿ç”¨æ–°å‘½å

#### 2.1 exercise-block åŸŸï¼ˆé‡æ„æ—¶ï¼‰

**ç›´æ¥ä½¿ç”¨æ–°å‘½åï¼š**
- åŸŸåï¼š`exercise-block`
- API è·¯ç”±ï¼š`/api/exercise-block`
- Repositoryï¼š`exercise-block.repository.ts`
- Use Caseï¼š`exercise-block.use-case.ts`

#### 2.2 å…¶ä»–åŸŸ

- `workout` - ä¿æŒï¼ˆæ ‡å‡†æœ¯è¯­ï¼‰
- `exercise` - ä¿æŒï¼ˆæ ‡å‡†æœ¯è¯­ï¼‰
- `set` - ä¿æŒï¼ˆæ ‡å‡†æœ¯è¯­ï¼‰

### é˜¶æ®µ 3ï¼šç»Ÿä¸€ API è·¯ç”±å•å¤æ•°

#### 3.1 æ”¹ä¸ºå•æ•°

```bash
# é‡å‘½å
app/api/sets/ â†’ app/api/set/
```

#### 3.2 æ›´æ–°å‰ç«¯è°ƒç”¨

```typescript
// æ—§
fetch('/api/sets')

// æ–°
fetch('/api/set')
```

---

## ğŸ“ è¯¦ç»†é‡æ„æ¸…å•

### bodypart â†’ body-part

#### æ–‡ä»¶é‡å‘½å

- [ ] `domain/bodypart/` â†’ `domain/body-part/`
- [ ] `app/api/bodypart/` â†’ `app/api/body-part/`
- [ ] `domain/body-part/application/bodypart.use-case.ts` â†’ `body-part.use-case.ts`
- [ ] `domain/body-part/repository/queries/bodypart.repository.ts` â†’ `body-part.repository.ts`
- [ ] `domain/body-part/repository/commands/bodypart.repository.ts` â†’ `body-part.repository.ts`

#### ä»£ç æ›´æ–°

- [ ] æ›´æ–°æ‰€æœ‰ `@domain/bodypart` å¯¼å…¥è·¯å¾„
- [ ] æ›´æ–°æ‰€æœ‰ `/api/bodypart` API è°ƒç”¨
- [ ] æ›´æ–°æµ‹è¯•æ–‡ä»¶ä¸­çš„å¯¼å…¥å’Œè°ƒç”¨
- [ ] æ›´æ–°æ–‡æ¡£ä¸­çš„å¼•ç”¨

#### éªŒè¯

- [ ] è¿è¡Œæµ‹è¯•ç¡®ä¿é€šè¿‡
- [ ] æ£€æŸ¥ API è·¯ç”±æ­£å¸¸å·¥ä½œ
- [ ] æ£€æŸ¥å‰ç«¯åŠŸèƒ½æ­£å¸¸

### workoutset â†’ exercise-blockï¼ˆé‡æ„æ—¶ï¼‰

#### æ–‡ä»¶é‡å‘½å

- [x] `domain/workoutset/` â†’ `domain/exercise-block/` âœ… å·²å®Œæˆ
- [x] `app/api/workoutset/` â†’ `app/api/exercise-block/` âœ… å·²å®Œæˆ
- [x] ç›¸å…³ Repository å’Œ Use Case æ–‡ä»¶ âœ… å·²å®Œæˆ

#### ä»£ç æ›´æ–°

- [x] æ›´æ–°æ‰€æœ‰å¯¼å…¥è·¯å¾„ âœ… å·²å®Œæˆ
- [x] æ›´æ–°æ‰€æœ‰ API è°ƒç”¨ âœ… å·²å®Œæˆ
- [x] æ›´æ–°æµ‹è¯•æ–‡ä»¶ âœ… å·²å®Œæˆ

### sets â†’ set

#### æ–‡ä»¶é‡å‘½å

- [x] `app/api/sets/` â†’ `app/api/set/` âœ… å·²å®Œæˆ

#### ä»£ç æ›´æ–°

- [x] æ›´æ–°æ‰€æœ‰ `/api/sets` API è°ƒç”¨ âœ… å·²å®Œæˆï¼ˆæ— å‰ç«¯è°ƒç”¨ï¼‰

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åº“è¡¨åä¿æŒä¸å˜

**é‡è¦ï¼š** æ‰€æœ‰æ•°æ®åº“è¡¨åå­—ç¬¦ä¸²å¿…é¡»ä¿æŒä¸å˜ï¼Œç¡®ä¿ï¼š
- Python åç«¯æ•°æ®å¯ä»¥æ­£å¸¸å¯¼å…¥
- ç°æœ‰æ•°æ®ä¸å—å½±å“
- é¿å…æ•°æ®è¿ç§»å¤æ‚æ€§

### 2. Schema å®šä¹‰

```typescript
// âœ… æ­£ç¡®ï¼šè¡¨åå­—ç¬¦ä¸²ä¿æŒä¸å˜
export const bodyParts = sqliteTable('body_parts', { ... });

// âŒ é”™è¯¯ï¼šä¸è¦æ”¹è¡¨åå­—ç¬¦ä¸²
export const bodyParts = sqliteTable('body_parts', { ... }); // ä¸è¦æ”¹
```

### 3. è„šæœ¬æ–‡ä»¶

æ‰€æœ‰è„šæœ¬æ–‡ä»¶ä¸­çš„ SQL è¡¨åå­—ç¬¦ä¸²ä¿æŒä¸å˜ï¼š
- `scripts/reset-db.ts`
- `scripts/init-db.ts`
- `scripts/init-db.sql`
- `tests/setup/test-db.ts`

### 4. æµ‹è¯•è¦†ç›–

é‡æ„åéœ€è¦ï¼š
- è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿é€šè¿‡
- æ‰‹åŠ¨æµ‹è¯• API åŠŸèƒ½
- æ£€æŸ¥å‰ç«¯åŠŸèƒ½æ­£å¸¸

### 5. æ–‡æ¡£æ›´æ–°

é‡æ„åéœ€è¦æ›´æ–°ï¼š
- API æ–‡æ¡£
- å¼€å‘æ–‡æ¡£
- README æ–‡ä»¶

---

## ğŸ“… å®æ–½æ—¶é—´è¡¨

### å½“å‰é˜¶æ®µ

- **bodypart â†’ body-part**ï¼šç«‹å³å¼€å§‹
- **sets â†’ set**ï¼šå¯ä»¥åŒæ—¶è¿›è¡Œ

### åç»­é˜¶æ®µ

- **workoutset â†’ exercise-block**ï¼šç­‰é‡æ„ workoutset åŸŸæ—¶è¿›è¡Œ
- å…¶ä»–åŸŸï¼šä¿æŒç°çŠ¶æˆ–é‡æ„æ—¶ç»Ÿä¸€å¤„ç†

---

## ğŸ” éªŒè¯æ¸…å•

é‡æ„å®Œæˆåï¼Œéœ€è¦éªŒè¯ï¼š

- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] API è·¯ç”±æ­£å¸¸å·¥ä½œ
- [ ] å‰ç«¯åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®åº“è¡¨åæœªæ”¹å˜
- [ ] æ•°æ®å¯¼å…¥åŠŸèƒ½æ­£å¸¸
- [ ] æ–‡æ¡£å·²æ›´æ–°

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [åŠ›é‡ä¸¾æœ¯è¯­è§„èŒƒ](../åŠ›é‡ä¸¾æœ¯è¯­è§„èŒƒ.md)
- [é¡¹ç›®è§„èŒƒ](../é¡¹ç›®è§„èŒƒ.md)
- [é‡æ„è¯„ä¼°æŠ¥å‘Š](./é‡æ„è¯„ä¼°æŠ¥å‘Š.md) (å·²å½’æ¡£)

---

**æœ€åæ›´æ–°ï¼š** 2024-01-15  
**çŠ¶æ€ï¼š** âœ… å·²å®Œæˆï¼ˆå·²å½’æ¡£ï¼‰

