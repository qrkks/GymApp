# 视图层规范 - 待决策事项

本文档列出视图层规范中需要团队决策的事项。每个决策都需要明确选择，并在整个项目中保持一致。

---

## 1. 组件目录命名风格

**问题：** 组件目录使用 PascalCase 还是 kebab-case？

**选项：**
- **选项 A：PascalCase**（如 `UserProfile/`, `ExerciseGroup/`）
  - 优点：与组件名一致，更直观
  - 缺点：与路由目录风格不同
  
- **选项 B：kebab-case**（如 `user-profile/`, `exercise-group/`）
  - 优点：与路由目录风格一致
  - 缺点：与组件名不一致

**规范说明：** 两种方式都可以，但必须在项目内保持一致。

**需要决定：** 选择一种方式，并在整个项目中统一使用。

---

## 2. 组件组织方式

**问题：** 组件如何组织？按功能还是按领域？

**选项：**
- **选项 A：按功能组织（推荐）**
  - 所有组件放在 `components/` 目录
  - 使用子目录组织相关组件
  - 共享组件放在 `components/` 根目录
  - 示例结构：
    ```
    components/
    ├── Button.tsx
    ├── Input.tsx
    ├── UserProfile/
    │   └── UserProfile.tsx
    └── WorkoutSet/
        └── WorkoutSet.tsx
    ```

- **选项 B：按领域组织**
  - 组件放在各自领域的目录下
  - 共享组件放在 `components/shared/`
  - 示例结构：
    ```
    app/
    ├── workout/
    │   └── components/
    │       └── WorkoutSet.tsx
    └── user/
        └── components/
            └── UserProfile.tsx
    components/
    └── shared/
        ├── Button.tsx
        └── Input.tsx
    ```

**需要决定：** 选择一种组织方式，并在整个项目中保持一致。

---

## 3. 路由目录单复数

**问题：** 路由目录使用单数还是复数？

**当前状态：** 
- `workouts/` - 复数
- `exercise-library/` - 单数
- `user/` - 单数

**规范说明：** 使用单数形式（除非语义上必须使用复数）

**选项：**
- **选项 A：统一使用单数**
  - `workouts/` → `workout/`
  - 优点：符合规范，语义清晰
  - 缺点：需要修改路由和所有引用

- **选项 B：保持现状（语义决定）**
  - `workouts/` 保持复数（因为表示多个训练）
  - 其他使用单数
  - 优点：不需要修改
  - 缺点：不一致

**需要决定：** 是否统一为单数，还是保持现状。

---

## 4. 状态管理方案

**问题：** 共享状态使用什么方案？

**选项：**
- **选项 A：Context API**
  - 优点：React 内置，无需额外依赖
  - 缺点：性能可能不如专业库，需要手动优化

- **选项 B：状态管理库（Zustand, Redux, Jotai 等）**
  - 优点：性能更好，功能更强大
  - 缺点：需要额外依赖和学习成本

- **选项 C：混合方案**
  - 简单状态用 Context API
  - 复杂状态用状态管理库

**当前状态：** 使用 `authStore.js`（可能是 Zustand 或类似库）

**需要决定：** 选择一种方案，并明确使用场景。

---

## 5. 类型文件位置

**问题：** 共享类型定义放在哪里？

**选项：**
- **选项 A：`types/` 目录**
  - 示例：`types/user.types.ts`
  - 优点：集中管理，易于查找

- **选项 B：`@types/` 目录**
  - 示例：`@types/user.types.ts`
  - 优点：符合 TypeScript 约定

- **选项 C：按领域分散**
  - 示例：`domain/user/types.ts`
  - 优点：类型与领域代码在一起

**需要决定：** 选择一种方式，并统一使用。

---

## 6. 自定义 Hooks 位置

**问题：** 自定义 Hooks 放在哪里？

**选项：**
- **选项 A：`hooks/` 目录**
  - 示例：`hooks/useUserData.ts`
  - 优点：集中管理，易于查找和复用

- **选项 B：组件同目录**
  - 示例：`components/UserProfile/useUserData.ts`
  - 优点：与使用它的组件在一起

- **选项 C：混合方案**
  - 共享 Hooks 放在 `hooks/`
  - 组件特定 Hooks 放在组件目录

**需要决定：** 选择一种方式，并统一使用。

---

## 7. 样式方案

**问题：** 使用什么样式方案？

**选项：**
- **选项 A：Tailwind CSS（当前使用）**
  - 优点：快速开发，无需写 CSS
  - 缺点：类名可能很长

- **选项 B：CSS Modules**
  - 优点：作用域隔离，类型安全
  - 缺点：需要写 CSS 文件

- **选项 C：混合方案**
  - 主要使用 Tailwind
  - 复杂样式使用 CSS Modules

**当前状态：** 使用 Tailwind CSS

**需要决定：** 是否继续使用 Tailwind，还是引入 CSS Modules。

---

## 8. 测试文件位置

**问题：** 测试文件放在哪里？

**选项：**
- **选项 A：与源文件同目录**
  - 示例：`UserProfile.tsx` 和 `UserProfile.test.tsx`
  - 优点：易于找到相关测试

- **选项 B：`__tests__/` 目录**
  - 示例：`__tests__/UserProfile.test.tsx`
  - 优点：测试文件集中，不污染源文件目录

**规范说明：** 两种方式都可以，但需要保持一致。

**需要决定：** 选择一种方式，并统一使用。

---

## 9. 页面特定组件位置

**问题：** 页面特定的组件放在哪里？

**选项：**
- **选项 A：放在路由目录中**
  - 示例：`app/workout/[date]/WorkoutSet.tsx`
  - 优点：与页面代码在一起，易于理解

- **选项 B：放在 `components/` 目录**
  - 示例：`components/WorkoutSet.tsx`
  - 优点：所有组件集中管理

**当前状态：** 页面特定组件放在路由目录中

**需要决定：** 是否保持现状，还是统一放到 `components/`。

---

## 10. 导入路径别名

**问题：** 使用什么路径别名？

**当前状态：** 使用 `@/` 作为别名

**选项：**
- **选项 A：`@/`（当前）**
  - 示例：`@/components`, `@/lib`
  - 优点：简洁，符合 Next.js 约定

- **选项 B：更具体的别名**
  - 示例：`@components/`, `@lib/`, `@types/`
  - 优点：更明确，避免冲突

**需要决定：** 是否保持 `@/`，还是使用更具体的别名。

---

## 决策记录模板

请记录每个决策的结果：

### 决策 1：组件目录命名
- [ ] 选择 A：PascalCase
- [ ] 选择 B：kebab-case
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 2：组件组织方式
- [ ] 选择 A：按功能组织
- [ ] 选择 B：按领域组织
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 3：路由目录单复数
- [ ] 选择 A：统一使用单数
- [ ] 选择 B：保持现状（语义决定）
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 4：状态管理方案
- [ ] 选择 A：Context API
- [ ] 选择 B：状态管理库
- [ ] 选择 C：混合方案
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 5：类型文件位置
- [ ] 选择 A：`types/` 目录
- [ ] 选择 B：`@types/` 目录
- [ ] 选择 C：按领域分散
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 6：自定义 Hooks 位置
- [ ] 选择 A：`hooks/` 目录
- [ ] 选择 B：组件同目录
- [ ] 选择 C：混合方案
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 7：样式方案
- [ ] 选择 A：Tailwind CSS（保持现状）
- [ ] 选择 B：CSS Modules
- [ ] 选择 C：混合方案
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 8：测试文件位置
- [ ] 选择 A：与源文件同目录
- [ ] 选择 B：`__tests__/` 目录
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 9：页面特定组件位置
- [ ] 选择 A：放在路由目录中（保持现状）
- [ ] 选择 B：放在 `components/` 目录
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

### 决策 10：导入路径别名
- [ ] 选择 A：`@/`（保持现状）
- [ ] 选择 B：更具体的别名
- **决策结果：** _______________
- **决策日期：** _______________
- **决策人：** _______________

---

## 决策原则

在做出决策时，考虑以下因素：

1. **一致性**：选择与现有代码库最一致的方案
2. **可维护性**：选择易于维护和理解的方案
3. **团队熟悉度**：选择团队熟悉的方案
4. **项目规模**：根据项目规模选择合适的方案
5. **未来扩展**：考虑未来可能的需求

---

**文档版本：** 1.0  
**创建日期：** 2025-01-01

