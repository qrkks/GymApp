# è·¯ç”±å±‚å‘½åå’Œç»“æ„è¯„ä¼°æŠ¥å‘Š

## ğŸ“Š æ€»ä½“è¯„ä¼°

**å½“å‰çŠ¶æ€ï¼š** âš ï¸ **åŸºæœ¬ç¬¦åˆè§„èŒƒï¼Œä½†æœ‰æ”¹è¿›ç©ºé—´**

**ç¬¦åˆåº¦ï¼š** 75%

---

## âœ… ç¬¦åˆè§„èŒƒçš„éƒ¨åˆ†

### 1. ç›®å½•å‘½å
- âœ… ä½¿ç”¨ **kebab-case**ï¼ˆ`body-part`, `exercise-block`ï¼‰
- âœ… ä½¿ç”¨ **å•æ•°**ï¼ˆ`workout`, `exercise`, `set`ï¼‰
- âœ… Next.js çº¦å®šï¼ˆ`route.ts`, `[id]`, `[date]`ï¼‰

### 2. RESTful è®¾è®¡ï¼ˆéƒ¨åˆ†ï¼‰
- âœ… `/api/body-part` - GET, POST, DELETE
- âœ… `/api/body-part/[id]` - PATCH, DELETE
- âœ… `/api/exercise` - GET, POST, DELETE
- âœ… `/api/exercise/[id]` - PATCH, DELETE
- âœ… `/api/set` - GET
- âœ… `/api/set/[id]` - PUT, DELETE
- âœ… `/api/workout` - GET, POST, DELETE
- âœ… `/api/workout/[date]` - GET, DELETE
- âœ… `/api/user/me` - GET
- âœ… `/api/user/profile` - PUT
- âœ… `/api/user/password` - PUT

---

## âš ï¸ éœ€è¦æ”¹è¿›çš„éƒ¨åˆ†

### 1. ä¸ç¬¦åˆ RESTful åŸåˆ™çš„è·¯ç”±

#### é—®é¢˜ 1: `/api/exercise-block/update`
**å½“å‰ï¼š** `PUT /api/exercise-block/update`
**é—®é¢˜ï¼š** `update` æ˜¯åŠ¨è¯ï¼Œä¸ç¬¦åˆ RESTful è§„èŒƒ
**å»ºè®®ï¼š** `PUT /api/exercise-block/[date]/[exercise]`
**ç†ç”±ï¼š** æ›´æ–°èµ„æºåº”è¯¥ä½¿ç”¨èµ„æºæ ‡è¯†ç¬¦

#### é—®é¢˜ 2: `/api/workout/create`
**å½“å‰ï¼š** `POST /api/workout/create`
**é—®é¢˜ï¼š** `create` æ˜¯åŠ¨è¯ï¼Œä¸ç¬¦åˆ RESTful è§„èŒƒ
**å»ºè®®ï¼š** åˆå¹¶åˆ° `POST /api/workout`ï¼ˆå·²åœ¨ä¸»è·¯ç”±ä¸­å®ç°ï¼‰
**ç†ç”±ï¼š** POST æœ¬èº«è¡¨ç¤ºåˆ›å»ºï¼Œä¸éœ€è¦é¢å¤–çš„ `create` è·¯å¾„

#### é—®é¢˜ 3: `/api/workout/[date]/add-body-parts`
**å½“å‰ï¼š** `PUT /api/workout/[date]/add-body-parts`
**é—®é¢˜ï¼š** `add` æ˜¯åŠ¨è¯ï¼Œä¸ç¬¦åˆ RESTful è§„èŒƒ
**å»ºè®®ï¼š** `POST /api/workout/[date]/body-parts`
**ç†ç”±ï¼š** æ·»åŠ å…³è”èµ„æºåº”è¯¥ä½¿ç”¨ POST

#### é—®é¢˜ 4: `/api/workout/[date]/remove-body-parts`
**å½“å‰ï¼š** `PUT /api/workout/[date]/remove-body-parts`
**é—®é¢˜ï¼š** `remove` æ˜¯åŠ¨è¯ï¼Œä¸ç¬¦åˆ RESTful è§„èŒƒ
**å»ºè®®ï¼š** `DELETE /api/workout/[date]/body-parts`ï¼ˆå¸¦ body å‚æ•°ï¼‰
**æˆ–ï¼š** `DELETE /api/workout/[date]/body-parts/[body-part-id]`
**ç†ç”±ï¼š** åˆ é™¤å…³è”èµ„æºåº”è¯¥ä½¿ç”¨ DELETE

#### é—®é¢˜ 5: `/api/exercise/body-part/[name]`
**å½“å‰ï¼š** `GET /api/exercise/body-part/[name]`
**é—®é¢˜ï¼š** åµŒå¥—è·¯å¾„ï¼Œä½†ä¸»è·¯ç”±å·²æ”¯æŒæŸ¥è¯¢å‚æ•°
**å»ºè®®ï¼š** ä½¿ç”¨ `GET /api/exercise?body_part_name=[name]`ï¼ˆå·²æ”¯æŒï¼‰
**ç†ç”±ï¼š** æŸ¥è¯¢åº”è¯¥ä½¿ç”¨æŸ¥è¯¢å‚æ•°ï¼Œè€Œä¸æ˜¯è·¯å¾„å‚æ•°

#### é—®é¢˜ 6: `/api/last-workout-all-sets` å’Œ `/api/last-workout-first-set`
**å½“å‰ï¼š** `GET /api/last-workout-all-sets`, `GET /api/last-workout-first-set`
**é—®é¢˜ï¼š** è·¯å¾„è¿‡é•¿ï¼Œä¸ç¬¦åˆ RESTful è§„èŒƒ
**å»ºè®®ï¼š** 
- `GET /api/workout/last/sets` - è·å–ä¸Šæ¬¡è®­ç»ƒçš„æ‰€æœ‰ç»„
- `GET /api/workout/last/sets/first` - è·å–ä¸Šæ¬¡è®­ç»ƒçš„ç¬¬ä¸€ç»„
**æˆ–ï¼š**
- `GET /api/exercise-block/last?exercise_name=[name]` - è·å–ä¸Šæ¬¡çš„åŠ¨ä½œå—
**ç†ç”±ï¼š** åº”è¯¥ä½œä¸º workout æˆ– exercise-block çš„å­èµ„æº

### 2. HTTP æ–¹æ³•ä½¿ç”¨

#### é—®é¢˜ï¼š`PUT` vs `PATCH`
**å½“å‰ï¼š**
- `PATCH /api/body-part/[id]` âœ… æ­£ç¡®
- `PATCH /api/exercise/[id]` âœ… æ­£ç¡®
- `PUT /api/set/[id]` âš ï¸ åº”è¯¥ç”¨ PATCHï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰
- `PUT /api/exercise-block/update` âš ï¸ åº”è¯¥ç”¨ PATCH

**å»ºè®®ï¼š**
- **PUT**ï¼šå®Œæ•´æ›¿æ¢èµ„æºï¼ˆå¾ˆå°‘ä½¿ç”¨ï¼‰
- **PATCH**ï¼šéƒ¨åˆ†æ›´æ–°èµ„æºï¼ˆæ¨èï¼‰

### 3. è·¯å¾„å‚æ•°å‘½å

**å½“å‰ï¼š**
- `[id]` âœ… æ ‡å‡†
- `[date]` âœ… æ¸…æ™°
- `[name]` âœ… æ¸…æ™°
- `[exercise]` âœ… æ¸…æ™°

**å»ºè®®ï¼š** ä¿æŒç°çŠ¶

---

## ğŸ“‹ æ”¹è¿›å»ºè®®

### æ–¹æ¡ˆ 1ï¼šå®Œå…¨ RESTfulï¼ˆæ¨èï¼‰

```
/api/
â”œâ”€â”€ body-part/
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â””â”€â”€ route.ts          # PATCH, DELETE
â”‚   â””â”€â”€ route.ts              # GET, POST, DELETE
â”œâ”€â”€ exercise/
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â””â”€â”€ route.ts          # PATCH, DELETE
â”‚   â””â”€â”€ route.ts              # GET, POST, DELETE (æ”¯æŒ ?body_part_name=)
â”œâ”€â”€ workout/
â”‚   â”œâ”€â”€ [date]/
â”‚   â”‚   â”œâ”€â”€ body-parts/
â”‚   â”‚   â”‚   â””â”€â”€ route.ts      # POST (æ·»åŠ ), DELETE (ç§»é™¤)
â”‚   â”‚   â””â”€â”€ route.ts          # GET, DELETE
â”‚   â”œâ”€â”€ last/
â”‚   â”‚   â””â”€â”€ sets/
â”‚   â”‚       â”œâ”€â”€ first/
â”‚   â”‚       â”‚   â””â”€â”€ route.ts  # GET
â”‚   â”‚       â””â”€â”€ route.ts      # GET
â”‚   â””â”€â”€ route.ts              # GET, POST, DELETE
â”œâ”€â”€ exercise-block/
â”‚   â”œâ”€â”€ [date]/
â”‚   â”‚   â””â”€â”€ [exercise]/
â”‚   â”‚       â””â”€â”€ route.ts      # GET, PUT, DELETE
â”‚   â””â”€â”€ route.ts              # GET, POST, DELETE
â”œâ”€â”€ set/
â”‚   â”œâ”€â”€ [id]/
â”‚   â”‚   â””â”€â”€ route.ts          # PATCH, DELETE
â”‚   â””â”€â”€ route.ts              # GET (æ”¯æŒ ?workout_date= & ?exercise_name=)
â””â”€â”€ user/
    â”œâ”€â”€ me/
    â”‚   â””â”€â”€ route.ts          # GET
    â”œâ”€â”€ profile/
    â”‚   â””â”€â”€ route.ts          # GET, PUT
    â””â”€â”€ password/
        â””â”€â”€ route.ts          # PUT
```

### æ–¹æ¡ˆ 2ï¼šä¿æŒç°çŠ¶ï¼Œä»…ä¿®å¤æ˜æ˜¾é—®é¢˜

**æœ€å°æ”¹åŠ¨ï¼š**
1. åˆ é™¤ `/api/workout/create`ï¼ˆåŠŸèƒ½å·²åˆå¹¶åˆ°ä¸»è·¯ç”±ï¼‰
2. é‡æ„ `/api/exercise-block/update` â†’ `/api/exercise-block/[date]/[exercise]`
3. é‡æ„ `last-workout-*` è·¯ç”±åˆ° `/api/workout/last/`

---

## ğŸ¯ ä¼˜å…ˆçº§å»ºè®®

### é«˜ä¼˜å…ˆçº§ï¼ˆå½±å“ RESTful è§„èŒƒï¼‰
1. âœ… é‡æ„ `/api/exercise-block/update` â†’ `/api/exercise-block/[date]/[exercise]`
2. âœ… é‡æ„ `/api/workout/[date]/add-body-parts` â†’ `/api/workout/[date]/body-parts` (POST)
3. âœ… é‡æ„ `/api/workout/[date]/remove-body-parts` â†’ `/api/workout/[date]/body-parts` (DELETE)

### ä¸­ä¼˜å…ˆçº§ï¼ˆæ”¹å–„ç»“æ„ï¼‰
4. âš ï¸ é‡æ„ `last-workout-*` è·¯ç”±
5. âš ï¸ åˆ é™¤ `/api/workout/create`ï¼ˆå¦‚æœä¸»è·¯ç”±å·²æ”¯æŒï¼‰

### ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰ï¼‰
6. âš ï¸ ç»Ÿä¸€ä½¿ç”¨ PATCH è€Œä¸æ˜¯ PUTï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰
7. âš ï¸ è€ƒè™‘åˆ é™¤ `/api/exercise/body-part/[name]`ï¼ˆä¸»è·¯ç”±å·²æ”¯æŒæŸ¥è¯¢å‚æ•°ï¼‰

---

## ğŸ“ æ€»ç»“

**å½“å‰çŠ¶æ€ï¼š**
- âœ… ç›®å½•å‘½åç¬¦åˆè§„èŒƒï¼ˆkebab-case, å•æ•°ï¼‰
- âœ… å¤§éƒ¨åˆ†è·¯ç”±ç¬¦åˆ RESTful è§„èŒƒ
- âš ï¸ éƒ¨åˆ†è·¯ç”±ä½¿ç”¨åŠ¨è¯ï¼ˆ`update`, `create`, `add`, `remove`ï¼‰
- âš ï¸ éƒ¨åˆ†è·¯ç”±è·¯å¾„è¿‡é•¿ï¼ˆ`last-workout-all-sets`ï¼‰

**å»ºè®®ï¼š**
- ä¼˜å…ˆä¿®å¤é«˜ä¼˜å…ˆçº§é—®é¢˜ï¼ˆåŠ¨è¯è·¯å¾„ï¼‰
- ä¿æŒå‘åå…¼å®¹æ€§ï¼ˆå¯ä»¥ä¿ç•™æ—§è·¯ç”±å¹¶æ ‡è®°ä¸º deprecatedï¼‰
- é€æ­¥è¿ç§»å‰ç«¯è°ƒç”¨åˆ°æ–°è·¯ç”±

---

**è¯„ä¼°æ—¥æœŸï¼š** 2025-01-01  
**è¯„ä¼°äººï¼š** AI Assistant

